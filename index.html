<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Protocolo 25 - Archivo Secreto</title>
    <style>
        body {
            margin: 0;
            background-color: #000;
            color: #00ff66;
            font-family: 'Courier New', monospace;
            overflow: hidden;
        }

        #screen {
            padding: 20px;
            white-space: pre-line;
            font-size: 1.1em;
        }

        .hidden {
            display: none;
        }

        .blink {
            animation: blink 1s infinite;
        }

        @keyframes blink {
            50% {
                opacity: 0;
            }
        }

        input {
            background: none;
            border: none;
            color: #00ff66;
            font-family: inherit;
            font-size: 1.1em;
            outline: none;
            width: 150px;
        }

        .terminal-line {
            margin-bottom: 10px;
        }

        .success {
            color: #00ff66;
        }

        .error {
            color: #ff3333;
        }

        .puzzle-line {
            margin-top: 20px;
            color: #00ffff;
        }

        .download-button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #00ff66;
            color: #000;
            border: none;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .download-button:hover {
            background-color: #00cc55;
        }

        /* Overlay para holograma */
        #hologramOverlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.97);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999;
        }

        #hologramOverlay.hidden {
            display: none;
        }

        #hologramContent video {
            width: 80%;
            max-width: 720px;
            border: 2px solid #00ff66;
            box-shadow: 0 0 30px #00ff66;
            filter: brightness(1.2) contrast(1.3) hue-rotate(90deg);
            border-radius: 8px;
        }
    </style>
</head>

<body>
    <audio id="beep" src="https://assets.mixkit.co/sfx/preview/mixkit-retro-game-notification-212.wav"
        preload="auto"></audio>
    <audio id="successSound" src="https://assets.mixkit.co/sfx/preview/mixkit-winning-notification-2018.wav"
        preload="auto"></audio>
    <audio id="errorSound" src="https://assets.mixkit.co/sfx/preview/mixkit-player-losing-or-failing-2042.wav"
        preload="auto"></audio>

    <div id="screen"></div>

    <!-- Overlay del holograma -->
    <div id="hologramOverlay" class="hidden">
        <div id="hologramContent">
            <video id="holoVideo" src="juls.mp4" autoplay controls></video>
        </div>
    </div>

    <script>
        const screen = document.getElementById('screen');
        const beep = document.getElementById('beep');
        const successSound = document.getElementById('successSound');
        const errorSound = document.getElementById('errorSound');

        const lines = [
            'PROTOCOLO_25 // ACCESO RESTRINGIDO',
            'Introduce el código de autorización para acceder al sistema:\\n',
        ];

        function printLine(text, delay = 1000) {
            return new Promise(resolve => {
                setTimeout(() => {
                    const div = document.createElement('div');
                    div.className = 'terminal-line';
                    div.textContent = text;
                    screen.appendChild(div);
                    screen.scrollTop = screen.scrollHeight;
                    beep.play();
                    resolve();
                }, delay);
            });
        }

        async function start() {
            for (const line of lines) {
                await printLine(line, 1000);
            }
            const inputLine = document.createElement('div');
            inputLine.className = 'terminal-line';
            inputLine.innerHTML = 'Código: <input id="codeInput" type="text" maxlength="8" autofocus /><span class="blink">_</span>';
            screen.appendChild(inputLine);
            document.getElementById('codeInput').focus();

            document.getElementById('codeInput').addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    validateCode(e.target.value);
                }
            });
        }

        function validateCode(code) {
            const result = document.createElement('div');
            result.className = 'terminal-line';
            if (code === '27122000') {
                result.innerHTML = '<span class="success">Acceso concedido. Bienvenida, Agente Juls.</span>';
                screen.appendChild(result);
                successSound.play();
                setTimeout(showMission, 2000);
            } else {
                result.innerHTML = '<span class="error">Error de autenticación. Movimiento no autorizado detectado.</span>';
                screen.appendChild(result);
                errorSound.play();
            }
        }

        function showMission() {
            screen.innerHTML = '';
            const missionText = [
                'Bienvenida, agente.',
                'Tu misión ha sido activada.',
                'Objetivo: Restaurar el archivo perdido del PROTOCOLO_25.',
                'Ubicación: Madrid, Zona Ponzano.',
                'Hora: 20:00 horas.',
                'Nivel de prioridad: MÁXIMO.',
                'Inicia la secuencia cuando estés lista...'
            ];
            let delay = 1000;
            missionText.forEach(line => {
                printLine(line, delay);
                delay += 1000;
            });
            setTimeout(showPuzzle, 8000);
        }

        function showPuzzle() {
            const puzzleIntro = document.createElement('div');
            puzzleIntro.className = 'puzzle-line';
            puzzleIntro.textContent = '\\nArchivo encriptado detectado.\\nPara restaurar el sistema, responde correctamente:';
            screen.appendChild(puzzleIntro);
            const puzzleQuestion = document.createElement('div');
            puzzleQuestion.className = 'terminal-line';
            puzzleQuestion.innerHTML = '¿Qué palabra oculta representa el movimiento constante de la misión? (pista: lugar del evento)';
            screen.appendChild(puzzleQuestion);
            const puzzleInput = document.createElement('div');
            puzzleInput.className = 'terminal-line';
            puzzleInput.innerHTML = 'Respuesta: <input id="puzzleInput" type="text" maxlength="10" autofocus /><span class="blink">_</span>';
            screen.appendChild(puzzleInput);
            document.getElementById('puzzleInput').focus();
            document.getElementById('puzzleInput').addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    checkPuzzle(e.target.value);
                }
            });
        }

        function checkPuzzle(answer) {
            const result = document.createElement('div');
            result.className = 'terminal-line';
            if (answer.toLowerCase() === 'vaivén' || answer.toLowerCase() === 'vaiven') {
                result.innerHTML = '<span class="success">Correcto. Archivo restaurado. Misión completada.</span>';
                screen.appendChild(result);
                successSound.play();
                setTimeout(showHologramButton, 2000);
            } else {
                result.innerHTML = '<span class="error">Respuesta incorrecta. El sistema permanece bloqueado.</span>';
                screen.appendChild(result);
                errorSound.play();
            }
        }

        function showHologramButton() {
            const endMessage = document.createElement('div');
            endMessage.className = 'terminal-line';
            endMessage.textContent = 'Fin de la transmisión.';
            screen.appendChild(endMessage);

            const holoButton = document.createElement('button');
            holoButton.className = 'download-button';
            holoButton.textContent = 'Ver transmisión holográfica de Juls';
            holoButton.onclick = () => {
                const overlay = document.getElementById('hologramOverlay');
                overlay.classList.remove('hidden');
                const holoVideo = document.getElementById('holoVideo');
                holoVideo.currentTime = 0;
                holoVideo.play();
            };
            screen.appendChild(holoButton);
        }

        start();
    </script>
</body>

</html>